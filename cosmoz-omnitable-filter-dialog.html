<link rel="import" href="../polymer/polymer.html">
<dom-module id="cosmoz-omnitable-filter-dialog">
    <template>
        <style>
			.container {
				padding: 12px;
			}
		</style>
		<div class="container">
			<h2>Filter</h2>
			<div id="filters"></div>
		</div>
            
    </template>
    <script>
    (() => {
    	'use strict';
    	Polymer({
    		is: 'cosmoz-omnitable-filter-dialog',

    		properties: {
    			columns: {
    				type: Array
    			}
    		},

    		observers: [
    			'_columnsChanged(columns.*)'
    		],

    		_columnsChanged(columnsChange) {
    			const columns = columnsChange.base,
    				filters = this.$.filters;

    			if (!columns) {
    				return;
    			}
    
    			filters.innerHTML = '';
    
    			columns.forEach(c => {
    				const instance = c.headerTemplatizer.getInstance();
    				if (!instance) {
    					return;
    				}
    				if (instance._flushProperties) {
    					instance._flushProperties(true);
    				}
    				Polymer.dom(this.$.filters).appendChild(instance.root);
    			});
    		}
    	});
    })();
    </script>
</dom-module>
