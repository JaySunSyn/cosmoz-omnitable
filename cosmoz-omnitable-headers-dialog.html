<link rel="import" href="../polymer/polymer.html">

<link rel="import" href="../paper-icon-button/paper-icon-button.html">

<link rel="import" href="../paper-autocomplete/paper-autocomplete.html">

<link rel="import" href="cosmoz-omnitable-repeater-behavior.html">
<!--
`cosmoz-omnitable-headers-dialog` is an element for displaying omnitable column headers in a separate dialog.

    <cosmoz-dialog>
		<template>
			<cosmoz-omnitable-headers-dialog
				columns="[[disabledColumns]]">
			</cosmoz-omnitable-headers-dialog>
		</template>
	</cosmoz-dialog>

In the above example, the `<cosmoz-omnitable-headers-dialog>` element is wrapped
with a `cosmoz-dialog` element which enables it to be displayed as a dialog.

@group Cosmoz Elements
@element cosmoz-omnitable-headers-dialog
@demo demo/index.html
-->
<dom-module id="cosmoz-omnitable-headers-dialog">
	<template>
		<style>
			:host {
				width: 100%;
			}
			.container {
				padding: 12px;
				max-height: calc(100vh - 60px);
				overflow: auto;
			}
			.close-btn {
				position: fixed;
				right: 12px;
				top: 12px;
				color: #fff;
			}
		</style>

		<paper-icon-button class="close-btn" icon="close" on-tap="_close"></paper-icon-button>
		
		<div class="container">
			<h2>[[title]]</h2>
			<slot name="header-cell"></slot>
		</div>
	</template>
	<script>
	(() => {
		'use strict';
		Polymer({
			is: 'cosmoz-omnitable-headers-dialog',

			behaviors: [
				Cosmoz.OmnitableRepeaterBehavior
			],

			properties: {
				/**
				 * The title displayed in the dialog.
				*/
				title: {
					type: String
				}
			},

			_elementType: 'div',

			_slotName: 'header-cell',

			_getTemplateInstance(column) {
				return column.headerTemplatizer.getInstance();
			},

			_detachTemplateInstance(instance, column, element) {
				column.headerTemplatizer.detachInstance(instance, element);
			},

			_configureTemplateInstance(instance) {
				this._forwardPropertiesFlush(instance);
			},

			_close() {
				this.fire('close-tapped');
			}
		});
})();
	</script>
</dom-module>
